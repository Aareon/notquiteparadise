
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>scripts.managers.ui &#8212; NotQuiteParadise 0.0.1 documentation</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for scripts.managers.ui</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pygame</span>

<span class="kn">from</span> <span class="nn">scripts.events.logging_events</span> <span class="k">import</span> <span class="n">LoggingEvent</span>
<span class="kn">from</span> <span class="nn">scripts.global_singletons.event_hub</span> <span class="k">import</span> <span class="n">publisher</span>
<span class="kn">from</span> <span class="nn">scripts.ui_elements.colours</span> <span class="k">import</span> <span class="n">Colour</span>
<span class="kn">from</span> <span class="nn">scripts.ui_elements.entity_info</span> <span class="k">import</span> <span class="n">SelectedEntityInfo</span>
<span class="kn">from</span> <span class="nn">scripts.core.constants</span> <span class="k">import</span> <span class="n">LoggingEventTypes</span><span class="p">,</span> <span class="n">VisualInfo</span>
<span class="kn">from</span> <span class="nn">scripts.ui_elements.message_log</span> <span class="k">import</span> <span class="n">MessageLog</span>
<span class="kn">from</span> <span class="nn">scripts.ui_elements.skill_bar</span> <span class="k">import</span> <span class="n">SkillBar</span>
<span class="kn">from</span> <span class="nn">scripts.ui_elements.targeting_overlay</span> <span class="k">import</span> <span class="n">TargetingOverlay</span>


<div class="viewcode-block" id="UIManager"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager">[docs]</a><span class="k">class</span> <span class="nc">UIManager</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Manage the UI, such as windows, resource bars etc</span>

<span class="sd">    Attributes:</span>
<span class="sd">        focused_window (pygame.surface) : The window currently in focus.</span>
<span class="sd">        main_surface (pygame.surface): The main surface to render to</span>
<span class="sd">        message_log (MessageLog): Object holding message log functionality</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">focused_window</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colour</span> <span class="o">=</span> <span class="n">Colour</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">desired_width</span> <span class="o">=</span> <span class="n">VisualInfo</span><span class="o">.</span><span class="n">BASE_WINDOW_WIDTH</span>  <span class="c1"># TODO - allow for selection by player but only multiples of</span>
                                                <span class="c1">#  base (16:9)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desired_height</span> <span class="o">=</span> <span class="n">VisualInfo</span><span class="o">.</span><span class="n">BASE_WINDOW_HEIGHT</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen_scaling_mod_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desired_width</span> <span class="o">//</span> <span class="n">VisualInfo</span><span class="o">.</span><span class="n">BASE_WINDOW_WIDTH</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen_scaling_mod_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">desired_height</span> <span class="o">//</span> <span class="n">VisualInfo</span><span class="o">.</span><span class="n">BASE_WINDOW_HEIGHT</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">desired_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">desired_height</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">VisualInfo</span><span class="o">.</span><span class="n">BASE_WINDOW_WIDTH</span><span class="p">,</span> <span class="n">VisualInfo</span><span class="o">.</span><span class="n">BASE_WINDOW_HEIGHT</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visible_elements</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># dict of all elements that are currently being rendered</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">message_log</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: MessageLog</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entity_info</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: SelectedEntityInfo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targeting_overlay</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: TargetingOverlay</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skill_bar</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># type: SkillBar</span>

        <span class="n">publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">LoggingEvent</span><span class="p">(</span><span class="n">LoggingEventTypes</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="n">f</span><span class="s2">&quot;UIManager initialised.&quot;</span><span class="p">))</span>

<div class="viewcode-block" id="UIManager.update"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update UI elements, if required.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">message_log</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">message_log</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="UIManager.delayed_init"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.delayed_init">[docs]</a>    <span class="k">def</span> <span class="nf">delayed_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        init additional objects. Called late due to dependencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_message_log</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_entity_info</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_targeting_overlay</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_skill_bar</span><span class="p">()</span></div>

<div class="viewcode-block" id="UIManager.init_message_log"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.init_message_log">[docs]</a>    <span class="k">def</span> <span class="nf">init_message_log</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialise the message log.</span>

<span class="sd">        Notes:</span>
<span class="sd">            Called late due to dependencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message_log</span> <span class="o">=</span> <span class="n">MessageLog</span><span class="p">()</span> <span class="c1"># OLD_MessageLog()</span></div>

<div class="viewcode-block" id="UIManager.init_entity_info"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.init_entity_info">[docs]</a>    <span class="k">def</span> <span class="nf">init_entity_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialise the selected entity info</span>

<span class="sd">        Notes:</span>
<span class="sd">            Called late due to dependencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entity_info</span> <span class="o">=</span> <span class="n">SelectedEntityInfo</span><span class="p">()</span></div>

<div class="viewcode-block" id="UIManager.init_targeting_overlay"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.init_targeting_overlay">[docs]</a>    <span class="k">def</span> <span class="nf">init_targeting_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialise the targeting_overlay</span>

<span class="sd">        Notes:</span>
<span class="sd">            Called late due to dependencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">targeting_overlay</span> <span class="o">=</span> <span class="n">TargetingOverlay</span><span class="p">()</span></div>

<div class="viewcode-block" id="UIManager.init_skill_bar"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.init_skill_bar">[docs]</a>    <span class="k">def</span> <span class="nf">init_skill_bar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialise the selected skill bar</span>

<span class="sd">        Notes:</span>
<span class="sd">            Called late due to dependencies.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skill_bar</span> <span class="o">=</span> <span class="n">SkillBar</span><span class="p">()</span></div>

<div class="viewcode-block" id="UIManager.draw_game"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.draw_game">[docs]</a>    <span class="k">def</span> <span class="nf">draw_game</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">game_map</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug_active</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw the entire game.</span>

<span class="sd">        Args:</span>
<span class="sd">            game_map (GameMap): the current game map</span>
<span class="sd">            debug_active (bool): whether to show the debug messages</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># TODO - draw dirty only</span>

        <span class="c1"># clear last frames drawing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_surface</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colour</span><span class="o">.</span><span class="n">black</span><span class="p">)</span>

        <span class="c1"># draw new frame</span>
        <span class="c1"># TODO - change visible_elements to enum</span>
        <span class="k">if</span> <span class="s2">&quot;game_map&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible_elements</span><span class="p">:</span>
            <span class="n">game_map</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_surface</span><span class="p">)</span>

        <span class="c1"># debug doesnt use a panel so we check for the flag</span>
        <span class="k">if</span> <span class="n">debug_active</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">scripts.global_singletons.managers</span> <span class="k">import</span> <span class="n">debug_manager</span>
            <span class="n">debug_manager</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_surface</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;message_log&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible_elements</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">message_log</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_surface</span><span class="p">)</span>
            <span class="c1">#self.message_log.draw_tooltips(self.main_surface)</span>

        <span class="k">if</span> <span class="s2">&quot;entity_info&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible_elements</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entity_info</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_surface</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;targeting_overlay&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible_elements</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">targeting_overlay</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_surface</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;skill_bar&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible_elements</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skill_bar</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_surface</span><span class="p">)</span>

        <span class="c1"># resize the surface to the desired resolution</span>
        <span class="n">scaled_surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">smoothscale</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_surface</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desired_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">desired_height</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">scaled_surface</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="c1"># update the display</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span>  <span class="c1"># make sure to do this as the last drawing element in a frame</span></div>

<div class="viewcode-block" id="UIManager.update_panel_visibility"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.update_panel_visibility">[docs]</a>    <span class="k">def</span> <span class="nf">update_panel_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ui_object</span><span class="p">,</span> <span class="n">visible</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update whether a panel is visible.</span>

<span class="sd">        Args:</span>
<span class="sd">            name(str): Key value</span>
<span class="sd">            ui_object(Object):   The object to pull the info from</span>
<span class="sd">            visible (bool): Whether to show the panel or not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">visible</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visible_elements</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ui_object</span>
            <span class="c1"># self.visible_elements[name] = Rect(panel.x, panel.y, panel.width, panel.height)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visible_elements</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="UIManager.get_scaled_mouse_pos"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.get_scaled_mouse_pos">[docs]</a>    <span class="k">def</span> <span class="nf">get_scaled_mouse_pos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the scaled mouse position</span>

<span class="sd">        Returns(tuple): Returns mouse position scaled to screen size</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mouse_pos</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">get_pos</span><span class="p">()</span>
        <span class="n">scaled_mouse_pos</span> <span class="o">=</span> <span class="n">mouse_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen_scaling_mod_x</span><span class="p">,</span> <span class="n">mouse_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen_scaling_mod_y</span>
        <span class="k">return</span> <span class="n">scaled_mouse_pos</span></div>

<div class="viewcode-block" id="UIManager.get_relative_scaled_mouse_pos"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.get_relative_scaled_mouse_pos">[docs]</a>    <span class="k">def</span> <span class="nf">get_relative_scaled_mouse_pos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visible_panel_name</span><span class="p">,</span> <span class="n">mouse_x</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">mouse_y</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the scaled mouse position relative to the visible panel. Current position used if one not provided.</span>

<span class="sd">        Args:</span>
<span class="sd">            visible_panel_name (str): name of the visible panel</span>
<span class="sd">            mouse_x(int): Optional. Mouses x coord</span>
<span class="sd">            mouse_y(int):  Optional. Mouses y coord.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: Returns mouse position scaled to screen size</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if mouse pos was provided use it, else get it</span>
        <span class="k">if</span> <span class="n">mouse_x</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">mouse_y</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">mouse_pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">mouse_x</span><span class="p">,</span> <span class="n">mouse_y</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mouse_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_scaled_mouse_pos</span><span class="p">()</span>

        <span class="n">ui_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible_elements</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">visible_panel_name</span><span class="p">)</span><span class="o">.</span><span class="n">panel</span>

        <span class="n">relative_mouse_pos</span> <span class="o">=</span> <span class="n">mouse_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">ui_object</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">mouse_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">ui_object</span><span class="o">.</span><span class="n">y</span>

        <span class="k">return</span> <span class="n">relative_mouse_pos</span></div>

<div class="viewcode-block" id="UIManager.get_clicked_panels_rect"><a class="viewcode-back" href="../../../managers.html#scripts.managers.ui.UIManager.get_clicked_panels_rect">[docs]</a>    <span class="k">def</span> <span class="nf">get_clicked_panels_rect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mouse_x</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">mouse_y</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determine which panel has been clicked based on mouse position. Current position used if one not provided.</span>

<span class="sd">        Args:</span>
<span class="sd">            mouse_x(int): Optional. Mouses x coord</span>
<span class="sd">            mouse_y(int):  Optional. Mouses y coord.</span>

<span class="sd">        Returns:</span>
<span class="sd">            rect: ui_element</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">clicked_rect</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># if mouse pos was provided use it, else get it</span>
        <span class="k">if</span> <span class="n">mouse_x</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">mouse_y</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">mouse_pos</span> <span class="o">=</span> <span class="p">(</span><span class="n">mouse_x</span><span class="p">,</span> <span class="n">mouse_y</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mouse_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_scaled_mouse_pos</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">ui_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible_elements</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ui_object</span><span class="p">,</span> <span class="s2">&quot;panel&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">ui_object</span><span class="o">.</span><span class="n">panel</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">collidepoint</span><span class="p">(</span><span class="n">mouse_pos</span><span class="p">):</span>
                    <span class="n">clicked_rect</span> <span class="o">=</span> <span class="n">key</span>

        <span class="k">return</span> <span class="n">clicked_rect</span></div></div>


<span class="k">def</span> <span class="nf">example_code</span><span class="p">():</span>
    <span class="k">pass</span>
<span class="c1"># Targeting function from pygame tut</span>
<span class="c1"># def menu_tile_select(coords_origin = None, max_range = None, radius = None,</span>
<span class="c1">#     penetrate_walls = True, pierce_creature = True):</span>
<span class="c1">#     &#39;&#39;&#39; This menu let`s the player select a tile.</span>
<span class="c1">#</span>
<span class="c1">#     This function pauses the game, produces an on screen rectangle and when the</span>
<span class="c1">#     player presses the left mb, will return (message for now) the map address.</span>
<span class="c1">#     &#39;&#39;&#39;</span>
<span class="c1">#</span>
<span class="c1">#     menu_close = False</span>
<span class="c1">#</span>
<span class="c1">#     while not menu_close:</span>
<span class="c1">#</span>
<span class="c1">#         # Get mos position</span>
<span class="c1">#         mouse_x, mouse_y = pygame.mouse.get_pos()</span>
<span class="c1">#</span>
<span class="c1">#         # Get button clicks</span>
<span class="c1">#         events_list = pygame.event.get()</span>
<span class="c1">#</span>
<span class="c1">#         # mouse map selection</span>
<span class="c1">#</span>
<span class="c1">#         mapx_pixel, mapy_pixel = CAMERA.win_to_map((mouse_x, mouse_y))</span>
<span class="c1">#</span>
<span class="c1">#         map_coord_x = mapx_pixel/constants.CELL_WIDTH</span>
<span class="c1">#         map_coord_y = mapy_pixel/constants.CELL_HEIGHT</span>
<span class="c1">#</span>
<span class="c1">#         valid_tiles = []</span>
<span class="c1">#</span>
<span class="c1">#         if coords_origin:</span>
<span class="c1">#             full_list_tiles = map_find_line(coords_origin, (map_coord_x, map_coord_y))</span>
<span class="c1">#</span>
<span class="c1">#             for i, (x, y) in enumerate(full_list_tiles):</span>
<span class="c1">#</span>
<span class="c1">#                 valid_tiles.append((x, y))</span>
<span class="c1">#</span>
<span class="c1">#                 # stop at max range</span>
<span class="c1">#                 if max_range and i == max_range - 1:</span>
<span class="c1">#                     break</span>
<span class="c1">#</span>
<span class="c1">#                 # stop at wall</span>
<span class="c1">#                 if not penetrate_walls and GAME.current_map[x][y].block_path:</span>
<span class="c1">#                     break</span>
<span class="c1">#</span>
<span class="c1">#                 # stop at creature</span>
<span class="c1">#                 if not pierce_creature and map_check_for_creature(x, y):</span>
<span class="c1">#                     break</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#         else:</span>
<span class="c1">#             valid_tiles = [(map_coord_x, map_coord_y)]</span>
<span class="c1">#</span>
<span class="c1">#         # return map_coords when presses left mb</span>
<span class="c1">#         for event in events_list:</span>
<span class="c1">#             if event.type == pygame.KEYDOWN:</span>
<span class="c1">#                 # if player presses &#39;i&#39; again, close menu</span>
<span class="c1">#                 if event.key == pygame.K_l:</span>
<span class="c1">#                     menu_close = True</span>
<span class="c1">#</span>
<span class="c1">#             if event.type == pygame.MOUSEBUTTONDOWN:</span>
<span class="c1">#</span>
<span class="c1">#                 if event.button == 1:</span>
<span class="c1">#                     # returns coords selected</span>
<span class="c1">#                     return (valid_tiles[-1])</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#         # draw game first</span>
<span class="c1">#         SURFACE_MAIN.fill(constants.COLOR_DEFAULT_BG)</span>
<span class="c1">#         SURFACE_MAP.fill(constants.COLOR_BLACK)</span>
<span class="c1">#</span>
<span class="c1">#         CAMERA.update()</span>
<span class="c1">#</span>
<span class="c1">#         # draw the map</span>
<span class="c1">#         draw_map(GAME.current_map)</span>
<span class="c1">#</span>
<span class="c1">#         # draw all objects</span>
<span class="c1">#         for obj in sorted(GAME.current_objects, key = lambda obj: obj.depth,</span>
<span class="c1">#             reverse = True):</span>
<span class="c1">#             obj.draw()</span>
<span class="c1">#</span>
<span class="c1">#         # Draw rectangle at mouse position on top of game</span>
<span class="c1">#         for (tile_x, tile_y) in valid_tiles:</span>
<span class="c1">#</span>
<span class="c1">#             if (tile_x, tile_y) == valid_tiles[-1]:</span>
<span class="c1">#                 draw_tile_rect(coords = (tile_x, tile_y), mark = &#39;X&#39;)</span>
<span class="c1">#             else:</span>
<span class="c1">#                 draw_tile_rect(coords = (tile_x, tile_y))</span>
<span class="c1">#</span>
<span class="c1">#         if radius:</span>
<span class="c1">#             area_effect = map_find_radius(valid_tiles[-1], radius)</span>
<span class="c1">#</span>
<span class="c1">#             for (tile_x, tile_y) in area_effect:</span>
<span class="c1">#</span>
<span class="c1">#                 draw_tile_rect(coords = (tile_x, tile_y),</span>
<span class="c1">#                                tile_color = constants.COLOR_RED,</span>
<span class="c1">#                                tile_alpha = 150)</span>
<span class="c1">#</span>
<span class="c1">#         SURFACE_MAIN.blit(SURFACE_MAP, (0, 0), CAMERA.rectangle)</span>
<span class="c1">#</span>
<span class="c1">#         draw_debug()</span>
<span class="c1">#         draw_messages()</span>
<span class="c1">#</span>
<span class="c1">#         # update the display</span>
<span class="c1">#         pygame.display.flip()</span>
<span class="c1">#</span>
<span class="c1">#         # tick the CLOCK</span>
<span class="c1">#         CLOCK.tick(constants.GAME_FPS)</span>


<span class="c1"># Camera class from pygame tutorial</span>
<span class="c1"># class obj_Camera:</span>
<span class="c1">#</span>
<span class="c1">#     def __init__(self):</span>
<span class="c1">#</span>
<span class="c1">#         self.width = constants.CAMERA_WIDTH</span>
<span class="c1">#         self.height = constants.CAMERA_HEIGHT</span>
<span class="c1">#         self.x, self.y = (0, 0)</span>
<span class="c1">#</span>
<span class="c1">#     @property</span>
<span class="c1">#     def rectangle(self):</span>
<span class="c1">#</span>
<span class="c1">#         pos_rect = pygame.Rect((0, 0), (constants.CAMERA_WIDTH,</span>
<span class="c1">#                                         constants.CAMERA_HEIGHT))</span>
<span class="c1">#</span>
<span class="c1">#         pos_rect.center = (self.x, self.y)</span>
<span class="c1">#</span>
<span class="c1">#         return pos_rect</span>
<span class="c1">#</span>
<span class="c1">#     @property</span>
<span class="c1">#     def map_address(self):</span>
<span class="c1">#</span>
<span class="c1">#         map_x = self.x / constants.CELL_WIDTH</span>
<span class="c1">#         map_y = self.y / constants.CELL_HEIGHT</span>
<span class="c1">#</span>
<span class="c1">#         return (map_x, map_y)</span>
<span class="c1">#</span>
<span class="c1">#     def update(self):</span>
<span class="c1">#</span>
<span class="c1">#         target_x = PLAYER.x * constants.CELL_WIDTH + (constants.CELL_WIDTH/2)</span>
<span class="c1">#         target_y = PLAYER.y * constants.CELL_HEIGHT + (constants.CELL_HEIGHT/2)</span>
<span class="c1">#</span>
<span class="c1">#         distance_x, distance_y = self.map_dist((target_x, target_y))</span>
<span class="c1">#</span>
<span class="c1">#         self.x += int(distance_x)</span>
<span class="c1">#         self.y += int(distance_y)</span>
<span class="c1">#</span>
<span class="c1">#     def win_to_map(self, coords):</span>
<span class="c1">#</span>
<span class="c1">#         tar_x, tar_y = coords</span>
<span class="c1">#</span>
<span class="c1">#         #convert window coords to distace from camera</span>
<span class="c1">#         cam_d_x, cam_d_y = self.cam_dist((tar_x, tar_y))</span>
<span class="c1">#</span>
<span class="c1">#         #distance from cam -&gt; map coord</span>
<span class="c1">#         map_p_x = self.x + cam_d_x</span>
<span class="c1">#         map_p_y = self.y + cam_d_y</span>
<span class="c1">#</span>
<span class="c1">#         return((map_p_x, map_p_y))</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#     def map_dist(self, coords):</span>
<span class="c1">#</span>
<span class="c1">#         new_x, new_y = coords</span>
<span class="c1">#</span>
<span class="c1">#         dist_x = new_x - self.x</span>
<span class="c1">#         dist_y = new_y - self.y</span>
<span class="c1">#</span>
<span class="c1">#         return (dist_x, dist_y)</span>
<span class="c1">#</span>
<span class="c1">#     def cam_dist(self, coords):</span>
<span class="c1">#</span>
<span class="c1">#         win_x, win_y = coords</span>
<span class="c1">#</span>
<span class="c1">#         dist_x = win_x - (self.width / 2)</span>
<span class="c1">#         dist_y = win_y - (self.height / 2)</span>
<span class="c1">#</span>
<span class="c1">#         return (dist_x, dist_y)</span>


<span class="c1"># button  from pygame tutorial</span>
<span class="c1"># class ui_Button:</span>
<span class="c1">#</span>
<span class="c1">#     def __init__(self, surface, button_text, size, center_coords,</span>
<span class="c1">#                  color_box_mouseover = constants.COLOR_RED,</span>
<span class="c1">#                  color_box_default = constants.COLOR_GREEN,</span>
<span class="c1">#                  color_text_mouseover = constants.COLOR_GREY,</span>
<span class="c1">#                  color_text_default = constants.COLOR_GREY):</span>
<span class="c1">#</span>
<span class="c1">#         self.surface = surface</span>
<span class="c1">#         self.button_text = button_text</span>
<span class="c1">#         self.size = size</span>
<span class="c1">#         self.center_coords = center_coords</span>
<span class="c1">#</span>
<span class="c1">#         self.c_box_mo = color_box_mouseover</span>
<span class="c1">#         self.c_box_default = color_box_default</span>
<span class="c1">#         self.c_text_mo = color_text_mouseover</span>
<span class="c1">#         self.c_text_default = color_text_default</span>
<span class="c1">#         self.c_c_box = color_box_default</span>
<span class="c1">#         self.c_c_text = color_text_default</span>
<span class="c1">#</span>
<span class="c1">#         self.rect = pygame.Rect((0, 0), size)</span>
<span class="c1">#         self.rect.center = center_coords</span>
<span class="c1">#</span>
<span class="c1">#     def update(self, player_input):</span>
<span class="c1">#</span>
<span class="c1">#         mouse_clicked = False</span>
<span class="c1">#</span>
<span class="c1">#         local_events, local_mousepos = player_input</span>
<span class="c1">#         mouse_x, mouse_y = local_mousepos</span>
<span class="c1">#</span>
<span class="c1">#         mouse_over = (   mouse_x &gt;= self.rect.left</span>
<span class="c1">#                      and mouse_x &lt;= self.rect.right</span>
<span class="c1">#                      and mouse_y &gt;= self.rect.top</span>
<span class="c1">#                      and mouse_y &lt;= self.rect.bottom )</span>
<span class="c1">#</span>
<span class="c1">#         for event in local_events:</span>
<span class="c1">#             if event.type == pygame.MOUSEBUTTONDOWN:</span>
<span class="c1">#                 if event.button == 1: mouse_clicked = True</span>
<span class="c1">#</span>
<span class="c1">#         if mouse_over and mouse_clicked:</span>
<span class="c1">#             return True</span>
<span class="c1">#</span>
<span class="c1">#         if mouse_over:</span>
<span class="c1">#             self.c_c_box = self.c_box_mo</span>
<span class="c1">#             self.c_c_text = self.c_text_mo</span>
<span class="c1">#         else:</span>
<span class="c1">#             self.c_c_box = self.c_box_default</span>
<span class="c1">#             self.c_c_text = self.c_text_default</span>
<span class="c1">#</span>
<span class="c1">#     def draw(self):</span>
<span class="c1">#</span>
<span class="c1">#         pygame.draw.rect(self.surface, self.c_c_box, self.rect)</span>
<span class="c1">#         draw_text(self.surface,</span>
<span class="c1">#                   self.button_text,</span>
<span class="c1">#                   constants.FONT_DEBUG_MESSAGE,</span>
<span class="c1">#                   self.center_coords,</span>
<span class="c1">#                   self.c_c_text,</span>
<span class="c1">#                   center = True)</span>


<span class="c1"># slider from pygame tutorial</span>
<span class="c1"># class ui_Slider:</span>
<span class="c1">#</span>
<span class="c1">#     def __init__(self,</span>
<span class="c1">#                  surface,</span>
<span class="c1">#                  size,</span>
<span class="c1">#                  center_coords,</span>
<span class="c1">#                  bg_color,</span>
<span class="c1">#                  fg_color,</span>
<span class="c1">#                  parameter_value):</span>
<span class="c1">#</span>
<span class="c1">#         self.surface = surface</span>
<span class="c1">#         self.size = size</span>
<span class="c1">#         self.bg_color = bg_color</span>
<span class="c1">#         self.fg_color = fg_color</span>
<span class="c1">#         self.current_val = parameter_value</span>
<span class="c1">#</span>
<span class="c1">#         self.bg_rect = pygame.Rect((0, 0), size)</span>
<span class="c1">#         self.bg_rect.center = center_coords</span>
<span class="c1">#         self.fg_rect = pygame.Rect((0, 0),</span>
<span class="c1">#                             (self.bg_rect.w * self.current_val, self.bg_rect.h))</span>
<span class="c1">#         self.fg_rect.topleft = self.bg_rect.topleft</span>
<span class="c1">#</span>
<span class="c1">#         self.grip_tab = pygame.Rect((0, 0), (20, self.bg_rect.h + 4))</span>
<span class="c1">#         self.grip_tab.center = (self.fg_rect.right, self.bg_rect.centery)</span>
<span class="c1">#</span>
<span class="c1">#     def update(self, player_input):</span>
<span class="c1">#</span>
<span class="c1">#         mouse_down = pygame.mouse.get_pressed()[0]</span>
<span class="c1">#</span>
<span class="c1">#         local_events, local_mousepos = player_input</span>
<span class="c1">#         mouse_x, mouse_y = local_mousepos</span>
<span class="c1">#</span>
<span class="c1">#         mouse_over = (   mouse_x &gt;= self.bg_rect.left</span>
<span class="c1">#                      and mouse_x &lt;= self.bg_rect.right</span>
<span class="c1">#                      and mouse_y &gt;= self.bg_rect.top</span>
<span class="c1">#                      and mouse_y &lt;= self.bg_rect.bottom )</span>
<span class="c1">#</span>
<span class="c1">#         if mouse_down and mouse_over:</span>
<span class="c1">#</span>
<span class="c1">#             self.current_val = (float(mouse_x) - float(self.bg_rect.left)) / self.bg_rect.w</span>
<span class="c1">#</span>
<span class="c1">#             self.fg_rect.width = self.bg_rect.width * self.current_val</span>
<span class="c1">#</span>
<span class="c1">#             self.grip_tab.center = (self.fg_rect.right, self.bg_rect.centery)</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#     def draw(self):</span>
<span class="c1">#</span>
<span class="c1">#         # draw background rectangle</span>
<span class="c1">#         pygame.draw.rect(self.surface, self.bg_color, self.bg_rect)</span>
<span class="c1">#</span>
<span class="c1">#         # draw foreground rectangle</span>
<span class="c1">#         pygame.draw.rect(self.surface, self.fg_color, self.fg_rect)</span>
<span class="c1">#</span>
<span class="c1">#         # draw slider tab</span>
<span class="c1">#         pygame.draw.rect(self.surface, constants.COLOR_BLACK, self.grip_tab)</span>
<span class="c1">#</span>



<span class="c1"># menus from pygame tutorial</span>
<span class="c1"># def menu_main():</span>
<span class="c1">#</span>
<span class="c1">#     button_y_offset = 40</span>
<span class="c1">#</span>
<span class="c1">#     game_initialize()</span>
<span class="c1">#</span>
<span class="c1">#     menu_running = True</span>
<span class="c1">#</span>
<span class="c1">#     title_x = constants.CAMERA_WIDTH/2</span>
<span class="c1">#     title_y = constants.CAMERA_HEIGHT/2 - button_y_offset</span>
<span class="c1">#     title_text = &quot;Python - RL&quot;</span>
<span class="c1">#</span>
<span class="c1">#     # BUTTON ADDRESSES</span>
<span class="c1">#     continue_button_y = title_y + button_y_offset</span>
<span class="c1">#     new_game_button_y = continue_button_y + button_y_offset</span>
<span class="c1">#     options_button_y = new_game_button_y + button_y_offset</span>
<span class="c1">#     quit_button_y = options_button_y + button_y_offset</span>
<span class="c1">#</span>
<span class="c1">#     continue_game_button = ui_Button(SURFACE_MAIN,</span>
<span class="c1">#                             &quot;Continue&quot;,</span>
<span class="c1">#                             (150, 30),</span>
<span class="c1">#                             (title_x, continue_button_y))</span>
<span class="c1">#</span>
<span class="c1">#     new_game_button = ui_Button(SURFACE_MAIN,</span>
<span class="c1">#                                 &quot;New Game&quot;,</span>
<span class="c1">#                                 (150, 30),</span>
<span class="c1">#                                 (title_x, new_game_button_y))</span>
<span class="c1">#</span>
<span class="c1">#     options_button = ui_Button(SURFACE_MAIN,</span>
<span class="c1">#                                &quot;Options&quot;,</span>
<span class="c1">#                                (150, 30),</span>
<span class="c1">#                                (title_x, options_button_y))</span>
<span class="c1">#</span>
<span class="c1">#     quit_button = ui_Button(SURFACE_MAIN,</span>
<span class="c1">#                             &quot;Quit Game&quot;,</span>
<span class="c1">#                             (150, 30),</span>
<span class="c1">#                             (title_x, quit_button_y))</span>
<span class="c1">#</span>
<span class="c1">#     pygame.mixer.music.load(ASSETS.music_background)</span>
<span class="c1">#     pygame.mixer.music.play(-1)</span>
<span class="c1">#</span>
<span class="c1">#     while menu_running:</span>
<span class="c1">#</span>
<span class="c1">#         list_of_events = pygame.event.get()</span>
<span class="c1">#         mouse_position = pygame.mouse.get_pos()</span>
<span class="c1">#</span>
<span class="c1">#         game_input = (list_of_events, mouse_position)</span>
<span class="c1">#</span>
<span class="c1">#         # handle menu events</span>
<span class="c1">#         for event in list_of_events:</span>
<span class="c1">#             if event.type == pygame.QUIT:</span>
<span class="c1">#                 pygame.quit()</span>
<span class="c1">#                 sys.exit()</span>
<span class="c1">#</span>
<span class="c1">#         #button updates</span>
<span class="c1">#         if continue_game_button.update(game_input):</span>
<span class="c1">#             pygame.mixer.music.stop()</span>
<span class="c1">#             # try to load game, start new if problems</span>
<span class="c1">#             try:</span>
<span class="c1">#                 game_load()</span>
<span class="c1">#             except:</span>
<span class="c1">#                 game_new()</span>
<span class="c1">#</span>
<span class="c1">#             game_main_loop()</span>
<span class="c1">#             game_initialize()</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#         if new_game_button.update(game_input):</span>
<span class="c1">#             pygame.mixer.music.stop()</span>
<span class="c1">#             game_new()</span>
<span class="c1">#             game_main_loop()</span>
<span class="c1">#             game_initialize()</span>
<span class="c1">#</span>
<span class="c1">#         if options_button.update(game_input):</span>
<span class="c1">#             menu_options()</span>
<span class="c1">#</span>
<span class="c1">#         if quit_button.update(game_input):</span>
<span class="c1">#             # quit the game</span>
<span class="c1">#             pygame.quit()</span>
<span class="c1">#             sys.exit()</span>
<span class="c1">#</span>
<span class="c1">#         # draw menu</span>
<span class="c1">#         SURFACE_MAIN.blit(ASSETS.MAIN_MENU_BG, (0, 0))</span>
<span class="c1">#</span>
<span class="c1">#         draw_text(SURFACE_MAIN,</span>
<span class="c1">#                   title_text,</span>
<span class="c1">#                   constants.FONT_TITLE_SCREEN,</span>
<span class="c1">#                   (title_x, title_y),</span>
<span class="c1">#                   constants.COLOR_RED,</span>
<span class="c1">#                   back_color = constants.COLOR_BLACK,</span>
<span class="c1">#                   center = True)</span>
<span class="c1">#</span>
<span class="c1">#         continue_game_button.draw()</span>
<span class="c1">#         new_game_button.draw()</span>
<span class="c1">#         options_button.draw()</span>
<span class="c1">#         quit_button.draw()</span>
<span class="c1">#</span>
<span class="c1">#         #update surface</span>
<span class="c1">#         pygame.display.update()</span>
<span class="c1">#</span>
<span class="c1"># def menu_options():</span>
<span class="c1">#</span>
<span class="c1">#     # MENU VARS #</span>
<span class="c1">#     settings_menu_width = 200</span>
<span class="c1">#     settings_menu_height = 200</span>
<span class="c1">#     settings_menu_bgcolor = constants.COLOR_GREY</span>
<span class="c1">#</span>
<span class="c1">#     # SLIDER VARS #</span>
<span class="c1">#     slider_x = constants.CAMERA_WIDTH/2</span>
<span class="c1">#     sound_effect_slider_y = constants.CAMERA_HEIGHT/2 - 60</span>
<span class="c1">#     sound_effect_vol = .5</span>
<span class="c1">#     music_effect_slider_y = sound_effect_slider_y + 50</span>
<span class="c1">#</span>
<span class="c1">#     # TEXT VARS #</span>
<span class="c1">#     text_y_offset = 20</span>
<span class="c1">#     sound_text_y = sound_effect_slider_y - text_y_offset</span>
<span class="c1">#     music_text_y = music_effect_slider_y - text_y_offset</span>
<span class="c1">#</span>
<span class="c1">#     # BUTTON VARS#</span>
<span class="c1">#     button_save_y = music_effect_slider_y + 50</span>
<span class="c1">#</span>
<span class="c1">#     window_center = (constants.CAMERA_WIDTH/2, constants.CAMERA_HEIGHT/2)</span>
<span class="c1">#</span>
<span class="c1">#     settings_menu_surface = pygame.Surface((settings_menu_width,</span>
<span class="c1">#                                             settings_menu_height))</span>
<span class="c1">#</span>
<span class="c1">#     settings_menu_rect = pygame.Rect(0, 0,</span>
<span class="c1">#                                      settings_menu_width,</span>
<span class="c1">#                                      settings_menu_height)</span>
<span class="c1">#</span>
<span class="c1">#     settings_menu_rect.center = window_center</span>
<span class="c1">#</span>
<span class="c1">#     menu_close = False</span>
<span class="c1">#</span>
<span class="c1">#     sound_effect_slider = ui_Slider(SURFACE_MAIN,</span>
<span class="c1">#                                     (125, 15),</span>
<span class="c1">#                                     (slider_x, sound_effect_slider_y),</span>
<span class="c1">#                                     constants.COLOR_RED,</span>
<span class="c1">#                                     constants.COLOR_GREEN,</span>
<span class="c1">#                                     PREFERENCES.vol_sound)</span>
<span class="c1">#</span>
<span class="c1">#     music_effect_slider = ui_Slider(SURFACE_MAIN,</span>
<span class="c1">#                                     (125, 15),</span>
<span class="c1">#                                     (slider_x, music_effect_slider_y),</span>
<span class="c1">#                                     constants.COLOR_RED,</span>
<span class="c1">#                                     constants.COLOR_GREEN,</span>
<span class="c1">#                                     PREFERENCES.vol_music)</span>
<span class="c1">#</span>
<span class="c1">#     save_button = ui_Button(SURFACE_MAIN,</span>
<span class="c1">#                             &quot;Save&quot;,</span>
<span class="c1">#                             (60, 30),</span>
<span class="c1">#                             (slider_x, button_save_y),</span>
<span class="c1">#                             constants.COLOR_DARKERGREY,</span>
<span class="c1">#                             constants.COLOR_DGREY,</span>
<span class="c1">#                             constants.COLOR_BLACK,</span>
<span class="c1">#                             constants.COLOR_BLACK)</span>
<span class="c1">#</span>
<span class="c1">#     while not menu_close:</span>
<span class="c1">#</span>
<span class="c1">#         list_of_events = pygame.event.get()</span>
<span class="c1">#         mouse_position = pygame.mouse.get_pos()</span>
<span class="c1">#</span>
<span class="c1">#         game_input = (list_of_events, mouse_position)</span>
<span class="c1">#</span>
<span class="c1">#         # handle menu events</span>
<span class="c1">#         for event in list_of_events:</span>
<span class="c1">#             if event.type == pygame.QUIT:</span>
<span class="c1">#                 pygame.quit()</span>
<span class="c1">#                 sys.exit()</span>
<span class="c1">#</span>
<span class="c1">#             if event.type == pygame.KEYDOWN:</span>
<span class="c1">#                 if event.key == pygame.K_ESCAPE:</span>
<span class="c1">#                     menu_close = True</span>
<span class="c1">#</span>
<span class="c1">#         current_sound_vol = PREFERENCES.vol_sound</span>
<span class="c1">#         current_music_vol = PREFERENCES.vol_music</span>
<span class="c1">#</span>
<span class="c1">#         sound_effect_slider.update(game_input)</span>
<span class="c1">#         music_effect_slider.update(game_input)</span>
<span class="c1">#</span>
<span class="c1">#         if current_sound_vol is not sound_effect_slider.current_val:</span>
<span class="c1">#             PREFERENCES.vol_sound = sound_effect_slider.current_val</span>
<span class="c1">#             ASSETS.volume_adjust()</span>
<span class="c1">#</span>
<span class="c1">#         if current_music_vol is not music_effect_slider.current_val:</span>
<span class="c1">#             PREFERENCES.vol_music = music_effect_slider.current_val</span>
<span class="c1">#             ASSETS.volume_adjust()</span>
<span class="c1">#</span>
<span class="c1">#         if save_button.update(game_input):</span>
<span class="c1">#             preferences_save()</span>
<span class="c1">#             menu_close = True</span>
<span class="c1">#</span>
<span class="c1">#         # Draw the Menu</span>
<span class="c1">#         settings_menu_surface.fill(settings_menu_bgcolor)</span>
<span class="c1">#</span>
<span class="c1">#         SURFACE_MAIN.blit(settings_menu_surface, settings_menu_rect.topleft)</span>
<span class="c1">#</span>
<span class="c1">#         draw_text(SURFACE_MAIN,</span>
<span class="c1">#               &quot;SOUND&quot;,</span>
<span class="c1">#               constants.FONT_DEBUG_MESSAGE,</span>
<span class="c1">#               (slider_x, sound_text_y),</span>
<span class="c1">#               constants.COLOR_BLACK,</span>
<span class="c1">#               center = True)</span>
<span class="c1">#</span>
<span class="c1">#         draw_text(SURFACE_MAIN,</span>
<span class="c1">#               &quot;MUSIC&quot;,</span>
<span class="c1">#               constants.FONT_DEBUG_MESSAGE,</span>
<span class="c1">#               (slider_x, music_text_y),</span>
<span class="c1">#               constants.COLOR_BLACK,</span>
<span class="c1">#               center = True)</span>
<span class="c1">#</span>
<span class="c1">#         sound_effect_slider.draw()</span>
<span class="c1">#         music_effect_slider.draw()</span>
<span class="c1">#         save_button.draw()</span>
<span class="c1">#</span>
<span class="c1">#         pygame.display.update()</span>
<span class="c1">#</span>
<span class="c1"># def menu_pause():</span>

<span class="c1">#     &#39;&#39;&#39;This menu pauses the game and displays a simple message.&#39;&#39;&#39;</span>
<span class="c1">#</span>
<span class="c1">#     # intialize to False, pause ends when set to True</span>
<span class="c1">#     menu_close = False</span>
<span class="c1">#</span>
<span class="c1">#     # window dimentions</span>
<span class="c1">#     window_width = constants.CAMERA_WIDTH</span>
<span class="c1">#     window_height = constants.CAMERA_HEIGHT</span>
<span class="c1">#</span>
<span class="c1">#     # Window Text characteristics</span>
<span class="c1">#     menu_text = &quot;PAUSED&quot;</span>
<span class="c1">#     menu_font = constants.FONT_DEBUG_MESSAGE</span>
<span class="c1">#</span>
<span class="c1">#     # helper vars</span>
<span class="c1">#     text_height = helper_text_height(menu_font)</span>
<span class="c1">#     text_width = len(menu_text) * helper_text_width(menu_font)</span>
<span class="c1">#</span>
<span class="c1">#     while not menu_close: # while False, pause continues</span>
<span class="c1">#</span>
<span class="c1">#         # get list of inputs</span>
<span class="c1">#         events_list = pygame.event.get()</span>
<span class="c1">#</span>
<span class="c1">#         # evaluate for each event</span>
<span class="c1">#         for event in events_list:</span>
<span class="c1">#</span>
<span class="c1">#             # if a key has been pressed</span>
<span class="c1">#             if event.type == pygame.KEYDOWN:</span>
<span class="c1">#</span>
<span class="c1">#                 # was it the &#39;p&#39; key?</span>
<span class="c1">#                 if event.key == pygame.K_p:</span>
<span class="c1">#                     menu_close = True  # if yes, close the menu.</span>
<span class="c1">#</span>
<span class="c1">#         # Draw the pause message on the screen.</span>
<span class="c1">#         draw_text(SURFACE_MAIN, menu_text, constants.FONT_DEBUG_MESSAGE,</span>
<span class="c1">#             ((window_width / 2) - (text_width / 2), (window_height / 2) - (text_height / 2)),</span>
<span class="c1">#             constants.COLOR_WHITE, constants.COLOR_BLACK)</span>
<span class="c1">#</span>
<span class="c1">#         CLOCK.tick(constants.GAME_FPS)</span>
<span class="c1">#</span>
<span class="c1">#         # update the display surface</span>
<span class="c1">#         pygame.display.flip()</span>
<span class="c1">#</span>
<span class="c1"># def menu_inventory():</span>
<span class="c1">#</span>
<span class="c1">#     &#39;&#39;&#39;Opens up the inventory menu.</span>
<span class="c1">#</span>
<span class="c1">#     The inventory menu allows the player to examine whatever items they are</span>
<span class="c1">#     currently holding.  Selecting an item will drop it.</span>
<span class="c1">#</span>
<span class="c1">#     &#39;&#39;&#39;</span>
<span class="c1">#</span>
<span class="c1">#     # initialize to False, when True, the menu closes</span>
<span class="c1">#     menu_close = False</span>
<span class="c1">#</span>
<span class="c1">#     # Calculate window dimensions</span>
<span class="c1">#     window_width = constants.CAMERA_WIDTH</span>
<span class="c1">#     window_height = constants.CAMERA_HEIGHT</span>
<span class="c1">#</span>
<span class="c1">#     # Menu Characteristics</span>
<span class="c1">#     menu_width = 200</span>
<span class="c1">#     menu_height = 200</span>
<span class="c1">#     menu_x = (window_width / 2) - (menu_width / 2)</span>
<span class="c1">#     menu_y = (window_height / 2) - (menu_height / 2)</span>
<span class="c1">#</span>
<span class="c1">#     # Menu Text Characteristics</span>
<span class="c1">#     menu_text_font = constants.FONT_MESSAGE_TEXT</span>
<span class="c1">#     menu_text_color = constants.COLOR_WHITE</span>
<span class="c1">#</span>
<span class="c1">#     # Helper var</span>
<span class="c1">#     menu_text_height = helper_text_height(menu_text_font)</span>
<span class="c1">#</span>
<span class="c1">#     # create a new surface to draw on.</span>
<span class="c1">#     local_inventory_surface = pygame.Surface((menu_width, menu_height))</span>
<span class="c1">#</span>
<span class="c1">#     while not menu_close:</span>
<span class="c1">#</span>
<span class="c1">#         ## Clear the menu</span>
<span class="c1">#         local_inventory_surface.fill(constants.COLOR_BLACK)</span>
<span class="c1">#</span>
<span class="c1">#         # collect list of item names</span>
<span class="c1">#         print_list = [obj.display_name for obj in PLAYER.container.inventory]</span>
<span class="c1">#</span>
<span class="c1">#         ## Get list of input events</span>
<span class="c1">#         events_list = pygame.event.get()</span>
<span class="c1">#         mouse_x, mouse_y = pygame.mouse.get_pos()</span>
<span class="c1">#</span>
<span class="c1">#         mouse_x_rel = mouse_x - menu_x</span>
<span class="c1">#         mouse_y_rel = mouse_y - menu_y</span>
<span class="c1">#</span>
<span class="c1">#         mouse_in_window = (mouse_x_rel &gt; 0 and</span>
<span class="c1">#                            mouse_y_rel &gt; 0 and</span>
<span class="c1">#                            mouse_x_rel &lt; menu_width and</span>
<span class="c1">#                            mouse_y_rel &lt; menu_height)</span>
<span class="c1">#</span>
<span class="c1">#         mouse_line_selection = mouse_y_rel / menu_text_height</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#         # cycle through events</span>
<span class="c1">#         for event in events_list:</span>
<span class="c1">#             if event.type == pygame.KEYDOWN:</span>
<span class="c1">#                 # if player presses &#39;i&#39; again, close menu</span>
<span class="c1">#                 if event.key == pygame.K_i:</span>
<span class="c1">#                     menu_close = True</span>
<span class="c1">#</span>
<span class="c1">#             if event.type == pygame.MOUSEBUTTONDOWN:</span>
<span class="c1">#</span>
<span class="c1">#                 if event.button == 1:</span>
<span class="c1">#</span>
<span class="c1">#                     if (mouse_in_window and</span>
<span class="c1">#                         mouse_line_selection &lt;= len(print_list) - 1) :</span>
<span class="c1">#</span>
<span class="c1">#                         PLAYER.container.inventory[mouse_line_selection].item.use()</span>
<span class="c1">#                         menu_close = True</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#         ## Draw the list</span>
<span class="c1">#         for line, (name) in enumerate(print_list):</span>
<span class="c1">#</span>
<span class="c1">#             if line == mouse_line_selection and mouse_in_window:</span>
<span class="c1">#                 draw_text(local_inventory_surface,</span>
<span class="c1">#                           name,</span>
<span class="c1">#                           menu_text_font,</span>
<span class="c1">#                           (0, 0 + (line * menu_text_height)),</span>
<span class="c1">#                           menu_text_color, constants.COLOR_GREY)</span>
<span class="c1">#             else:</span>
<span class="c1">#                 draw_text(local_inventory_surface,</span>
<span class="c1">#                           name,</span>
<span class="c1">#                           menu_text_font,</span>
<span class="c1">#                           (0, 0 + (line * menu_text_height)),</span>
<span class="c1">#                           menu_text_color)</span>
<span class="c1">#</span>
<span class="c1">#         # RENDER GAME #</span>
<span class="c1">#         draw_game()</span>
<span class="c1">#</span>
<span class="c1">#         ## Display Menu</span>
<span class="c1">#         SURFACE_MAIN.blit(local_inventory_surface, (menu_x, menu_y))</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#         CLOCK.tick(constants.GAME_FPS)</span>
<span class="c1">#</span>
<span class="c1">#         # update the display surface</span>
<span class="c1">#         pygame.display.update()</span>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">NotQuiteParadise</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../core.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../event_handlers.html">Event Handlers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../events.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../managers.html">Managers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../skills.html">Skills</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ui_elements.html">UI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../world.html">World</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Snayff.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>